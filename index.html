<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gerador de Esbo√ßos - Testemunhas de Jeov√°</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
    <style>
        .user-info {
            font-size: 1.1em;
            font-weight: 600;
            margin-bottom: 8px;
            padding: 10px;
            background-color: rgba(255, 255, 255, 0.1);
            border-radius: 8px;
            text-align: center;
        }
        .esbocos-restantes {
            font-size: 1em;
            margin-bottom: 20px;
            padding: 8px;
            background-color: #2c3e50;
            color: #ecf0f1;
            border-radius: 8px;
            text-align: center;
            font-weight: 500;
        }
    </style>
</head>
<body>
    <div class="app-wrapper">
        <!-- Bot√£o para abrir menu em mobile -->
        <button onclick="abrirMenu()" class="menu-btn" aria-label="Abrir menu">‚ò∞<span id="menuNotificacaoBadge" style="display: none;"></span></button>

        <!-- Sidebar / Menu Lateral -->
    <aside id="sidebar" class="sidebar">
            <div class="sidebar-header">
        <a href="javascript:void(0)" class="closebtn" onclick="fecharMenu()" aria-label="Fechar menu">√ó</a>
                <div class="logo-header">
                    <h1>üìñ Gerador IA</h1>
                </div>
            </div>

            <div class="sidebar-content">
                <div id="userInfo" class="user-info">Carregando...</div>
                <div id="esbocosRestantes" class="esbocos-restantes"></div>
                
                <!-- Links de Navega√ß√£o -->
                <a href="comprar-creditos.html" class="btn btn-primary" style="width: 100%; margin-bottom: 20px;">üí∞ Comprar Cr√©ditos</a>
                <a href="perfil.html" class="btn btn-secondary" style="width: 100%; margin-bottom: 20px;">üë§ Perfil e Hist√≥rico</a>

                <h3>Hist√≥rico</h3>
                <ul id="historicoList"><!-- Conte√∫do din√¢mico --></ul>

                <div id="notificacoesSection">
                    <h3>Notifica√ß√µes</h3>
                    <ul id="notificacoesList"><!-- Conte√∫do din√¢mico --></ul>
                    <button id="btnMarcarLidas" class="btn btn-secondary" style="width:100%; margin-top:10px; display:none;">Marcar como lidas</button>
                </div>
            </div>

            <div class="sidebar-footer">
                <button onclick="logout()" class="btn btn-danger" style="width: 100%;">Sair</button>
            </div>
    </aside>

        <!-- Conte√∫do Principal -->
        <main class="main-container">
            <!-- Formul√°rio -->
            <section id="formSection" class="card">
                <div class="page-header">
                    <h1>Gerador de Esbo√ßos</h1>
                    <p>Preencha os campos para criar um novo esbo√ßo para seu discurso.</p>
                </div>
                
                <div class="form-group">
                    <label for="tipoDiscurso">Tipo de Discurso:</label>
                    <select id="tipoDiscurso" name="tipoDiscurso">
                        <option value="">Escolha uma op√ß√£o...</option>
                        <option value="publico">Discurso P√∫blico (Em breve...)</option>
                        <option value="pesquisa">Pesquisa B√≠blica Profunda</option>
                        <option value="tesouros">1. Tesouros da Palavra de Deus</option>
                        <option value="publico">4. Iniciando conversas (Em breve...)</option>
                        <option value="publico">5. Cultivando o interesse (Em breve...)</option>
                        <option value="publico">6. Explicando suas cren√ßas (Em breve...)</option>
                    </select>
                </div>
                <div class="form-group"><label for="tempo">Tempo (minutos):</label><input type="number" id="tempo" name="tempo" placeholder="Ex: 10" min="1" max="10"></div>
                <div class="form-group"><label for="tema">Tema Espec√≠fico:</label><input type="text" id="tema" name="tema" placeholder="Digite o tema do seu discurso..."></div>
                <div class="form-group"><label for="versiculosOpicionais">Vers√≠culos (opcional):</label><input type="text" id="versiculosOpicionais" name="versiculosOpicionais" placeholder="Ex: Jo√£o 3:16; Salmo 23:1"></div>
                <div class="form-group"><label for="topicosOpicionais">T√≥picos (opcional):</label><input type="text"id="topicosOpicionais" name="topicosOpicionais" placeholder="T√≥picos que gostaria de incluir..."></div>
                <div class="form-group"><label for="informacoesAdicionais">Informa√ß√µes Adicionais (opcional):</label><input type="text" id="informacoesAdicionais" name="informacoesAdicionais" placeholder="Ex: tom animador, exemplos pr√°ticos..."></div>
                
                <button class="btn" onclick="gerarEsboco()">Gerar Esbo√ßo</button>
                <div class="error" id="errorMessage" role="alert" style="display: none;"></div>
            </section>

            <!-- Loading -->
            <div class="loading card" id="loading">
                <div class="spinner"></div>
                <p>Buscando informa√ß√µes na biblioteca JW.org...</p>
            </div>

            <!-- Resultados -->
            <section id="resultSection" class="card">
                <div class="result-header">
                    <h2 class="result-title" id="resultTitle">Esbo√ßo Gerado</h2>
                    <p class="result-type" id="resultType">Discurso Personalizado</p>
                </div>
                <div id="pontosList" style="display:none;"></div>
                <div class="referencias-section">
                    <h3 class="section-title">Conte√∫do Completo</h3>
                    <div id="referenciasList"><pre></pre></div>
                </div>
                <div class="result-actions">
                    <button class="btn btn-secondary" id="btnGerarNovo" onclick="mostrarFormulario()">+ Gerar Novo Esbo√ßo</button>
                    <button class="btn" id="btnDownload" onclick="baixarComoWord()">Baixar como Word</button>
                    <button class="btn" onclick="exportarResultado()">Copiar Texto</button>
                </div>
            </section>
        </main>
            </div>

    <!-- Firebase e Scripts -->
    <script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore-compat.js"></script>
    <script src="firebase-init.js"></script>
    <script src="auth.js"></script>
    <script src="script.js"></script>
</body>
</html>